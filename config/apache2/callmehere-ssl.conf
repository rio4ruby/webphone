<VirtualHost *:443>
  ServerName callmehere.kitatdot.net
  ServerAlias callmehere.kitatdot.net      
  DocumentRoot /srv/app/callmehere/public
 
  RewriteEngine On
 
  <Proxy balancer://thinservers>
    BalancerMember http://127.0.0.1:12000
    #BalancerMember http://127.0.0.1:12001
    #BalancerMember http://127.0.0.1:12002
  </Proxy>
 
  # Redirect all non-static requests to thin
  RewriteCond %{DOCUMENT_ROOT}/%{REQUEST_FILENAME} !-f
  RewriteRule ^/(.*)$ balancer://thinservers%{REQUEST_URI} [P,QSA,L]
 
  ProxyPass / balancer://thinservers/
  ProxyPassReverse / balancer://thinservers/
  ProxyPreserveHost on
 
  <Proxy *>
    Order deny,allow
    Allow from all
  </Proxy>
 
  # Custom log file locations
  ErrorLog /srv/app/callmehere/logs/sinatra_error.log
  CustomLog /srv/app/callmehere/logs/sinatra_access.log combined
 
  #   SSL Engine Switch:
  #   Enable/Disable SSL for this virtual host.
  SSLEngine on

  #   A self-signed (snakeoil) certificate can be created by installing
  #   the ssl-cert package. See
  #   /usr/share/doc/apache2/README.Debian.gz for more info.
  #   If both key and certificate are stored in the same file, only the
  #   SSLCertificateFile directive is needed.
  SSLCertificateFile	/srv/www/certs/server.pem
  SSLCertificateKeyFile /srv/www/certs/server.key
</VirtualHost> 

# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
